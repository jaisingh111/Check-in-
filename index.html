<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daily Check-In with my Wife ‚ù§Ô∏è</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#ff86bf" />
  <link rel="icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
</head>
<body>
  <div class="heartsLayer" id="heartsLayer" aria-hidden="true"></div>
  <header class="top">
    <div class="brand">
      <h1>Daily Check-In with my Wife ‚ù§Ô∏è</h1>
      <div class="loveHeaderPoem" id="lovePoem" aria-live="polite"></div>
      <p class="sub">Tap a day ‚Üí take a photo ‚Üí both of you see it</p>
    </div>

    <div class="status">
      <span id="statusDot" class="dot" aria-hidden="true"></span>
      <span id="statusText" class="muted">Connecting‚Ä¶</span>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="streakRow">
        <div>
          <div class="muted" style="font-size:.85rem;">Streak</div>
          <div class="streakNum"><span id="streakNow">‚Äî</span> üî•</div>
          <div class="muted" style="font-size:.85rem;">Longest: <span id="streakBest">‚Äî</span></div>
        </div>
        <div class="installBox" id="installBox" style="display:none;">
          <button class="btn" id="installBtn" type="button">Add to Home Screen</button>
          <div class="muted" style="font-size:.8rem;margin-top:6px;">Opens like a real app ‚ú®</div>
        </div>
      </div>
      <div class="muted" style="margin-top:10px;font-size:.88rem;">
        Streak counts consecutive days where <strong>both</strong> of you uploaded a photo for the same date.
      </div>
    </section>

    <section class="actions card">
      <div class="roleRow" role="group" aria-label="Choose who is checking in">
        <button id="roleH" class="btn role active" type="button">Husband check‚Äëin</button>
        <button id="roleW" class="btn role" type="button">Wife check‚Äëin</button>
        <a class="btn subtle" href="./setup.html" style="text-decoration:none;">Setup</a>
      </div>

      <div class="controls">
        <div class="ctrl">
          <label for="monthSel">Month</label>
          <select id="monthSel"></select>
        </div>
        <div class="ctrl">
          <label for="yearSel">Year</label>
          <select id="yearSel"></select>
        </div>

        <div class="ctrl">
          <button id="todayBtn" class="btn subtle" type="button">Go to today</button>
        </div>
      </div>

      <p class="hint muted">
        Selected role: <strong id="roleLabel">Husband</strong> ¬∑ Tap any date to add/replace that role‚Äôs photo.
      </p>

      <p id="setupWarn" class="muted" style="margin-top:10px;"></p>
    </section>

    <section class="calendar card">
      <div class="dow">
        <div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div><div>Sun</div>
      </div>
      <div id="grid" class="grid" aria-label="Calendar"></div>

      <div class="legend">
        <span class="chip"><span class="mini husband"></span> Husband photo</span>
        <span class="chip"><span class="mini wife"></span> Wife photo</span>
      </div>
    </section>


    <section class="card qa">
      <div class="qaHead">
        <h2 class="qaTitle">Daily Questions</h2>
        <div class="qaMeta muted">
          For: <span id="qaDate">‚Äî</span>
        </div>
      </div>

      <div class="qaGrid">
        <div class="qaCol" id="qaHusband">
          <h3 class="qaSub">Husband</h3>

          <label class="q">
            <span class="qText">How did you sleep?</span>
            <textarea id="h_q1" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="h" data-q="1">Save</button>
              <button class="btn clearQA" type="button" data-role="h" data-q="1">Clear</button>
              <span class="muted tiny saveHint" data-role="h" data-q="1"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">How are you feeling today (general + mood)?</span>
            <textarea id="h_q2" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="h" data-q="2">Save</button>
              <button class="btn clearQA" type="button" data-role="h" data-q="2">Clear</button>
              <span class="muted tiny saveHint" data-role="h" data-q="2"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">Is there anything on your mind?</span>
            <textarea id="h_q3" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="h" data-q="3">Save</button>
              <button class="btn clearQA" type="button" data-role="h" data-q="3">Clear</button>
              <span class="muted tiny saveHint" data-role="h" data-q="3"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">Is there anything I can do to help?</span>
            <textarea id="h_q4" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="h" data-q="4">Save</button>
              <button class="btn clearQA" type="button" data-role="h" data-q="4">Clear</button>
              <span class="muted tiny saveHint" data-role="h" data-q="4"></span>
            </div>
          </label>

          <div class="qaActions">
            <button id="h_clear" class="btn ghost" type="button">Clear</button>
            <span id="h_saved" class="muted tiny"></span>
          </div>
        </div>

        <div class="qaCol" id="qaWife">
          <h3 class="qaSub">Wife</h3>

          <label class="q">
            <span class="qText">How did you sleep?</span>
            <textarea id="w_q1" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="w" data-q="1">Save</button>
              <button class="btn clearQA" type="button" data-role="w" data-q="1">Clear</button>
              <span class="muted tiny saveHint" data-role="w" data-q="1"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">How are you feeling today (general + mood)?</span>
            <textarea id="w_q2" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="w" data-q="2">Save</button>
              <button class="btn clearQA" type="button" data-role="w" data-q="2">Clear</button>
              <span class="muted tiny saveHint" data-role="w" data-q="2"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">Is there anything on your mind?</span>
            <textarea id="w_q3" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="w" data-q="3">Save</button>
              <button class="btn clearQA" type="button" data-role="w" data-q="3">Clear</button>
              <span class="muted tiny saveHint" data-role="w" data-q="3"></span>
            </div>
          </label>

          <label class="q">
            <span class="qText">Is there anything I can do to help?</span>
            <textarea id="w_q4" rows="2" placeholder="Type here‚Ä¶"></textarea>
            <div class="qaInlineActions">
              <button class="btn saveQA" type="button" data-role="w" data-q="4">Save</button>
              <button class="btn clearQA" type="button" data-role="w" data-q="4">Clear</button>
              <span class="muted tiny saveHint" data-role="w" data-q="4"></span>
            </div>
          </label>

          <div class="qaActions">
            <button id="w_clear" class="btn ghost" type="button">Clear</button>
            <span id="w_saved" class="muted tiny"></span>
          </div>
        </div>
      </div>

      <p class="muted tiny" id="qaHint" style="margin-top:10px;"></p>
    </section>

  </main>

  <input id="cameraInput" class="hidden" type="file" accept="image/*" capture="environment" />

  <script type="module" src="./app.js"></script>
</body>
</html>
